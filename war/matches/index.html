<html>
  <head>
    <title>GGP Apollo Server</title>
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Droid+Sans:bold">
    <link rel="stylesheet" type="text/css" href="/apollo.css" />
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
    <script type='text/javascript' src='//www.ggp.org/scripts/Analytics.js'></script>
  </head>
  <body>
    <script type='text/javascript' src='//www.ggp.org/scripts/common/ResourceLoader.js'></script>
    <script type='text/javascript' src='//www.ggp.org/scripts/common/UserInterface.js'></script>
    <script type="text/javascript" src="/apolloHeader.js"></script>
    
    <div id='header'></div>
    <br>
    <center><div id='stateInfo'></div></center>
    <br>
    <div id='recentMatchesInfo'></div>

    <script type='text/javascript'>
      generateHeader(document.getElementById('header'));    

      var loginState = ResourceLoader.load_json('/data/login');
      if (loginState.loggedIn && loginState.isAdmin) {
        // This isn't sensitive data, but it just clutters up the UI if we show it to everyone,
        // and only the admin really needs to see it.
        var serverState = ResourceLoader.load_json('/data/serverState');
        var serverStateHTML = 'Currently on scheduling round ' + serverState.schedulingRound + '.<br>';
        serverStateHTML += 'Consecutive backend errors so far: ' + serverState.backendErrors + '.<br>';
        document.getElementById('stateInfo').innerHTML = serverStateHTML;
      }    

      var ongoingMatches = ResourceLoader.load_json('/data/matches/ongoing/set');      
      var recentMatches = ResourceLoader.load_json('/data/matches/recent/');
      recentMatches.reverse();
      var matchListCaption = 'Listing of the ' + recentMatches.length + ' most recently played matches, of which ' + ongoingMatches.length + ' are ongoing:';
      var recentMatchesHTML = renderMatchEntries(recentMatches, ongoingMatches, matchListCaption, null);
      document.getElementById('recentMatchesInfo').innerHTML = recentMatchesHTML;
    </script>
  </body>  
</html>