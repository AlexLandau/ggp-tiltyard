<html>
  <head>
    <title>GGP.org - Apollo Gaming Server</title>
    <meta name="description" content="General game playing is about playing games that you've never seen before. Watch intelligent computers play games against each other here!" />  
    <link rel="shortcut icon" href="http://www.ggp.org/favicon.ico">
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Droid+Sans:bold">
    <link rel="stylesheet" type="text/css" href="/apollo.css" />
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
    <script type='text/javascript' src='//www.ggp.org/scripts/Analytics.js'></script>
  </head>
  <body>
    <script type='text/javascript' src='//www.ggp.org/scripts/common/ResourceLoader.js'></script>
    <script type='text/javascript' src='//www.ggp.org/scripts/common/UserInterface.js'></script>
    <script type="text/javascript" src="/apolloHeader.js"></script>
  
    <div id='header'></div>
    <br>
    <center>
    <div id='gameList'></div>
    </center>

    <script type='text/javascript'>
      generateHeader(document.getElementById('header'));      

      var toProperString = function (x) {
        if (x <= 0) return "Zero";
        if (x == 1) return "One";
        if (x == 2) return "Two";
        if (x == 3) return "Three";
        if (x == 4) return "Four";
        if (x == 5) return "Five";
        if (x == 6) return "Six";
        if (x == 7) return "Seven";
        if (x == 8) return "Eight";
        if (x == 9) return "Nine";
        return "10+";
      }

      function drawGameList() {
        var observedGames = ResourceLoader.load_json('//database.ggp.org/statistics/' + hashedApolloPK + '/overall').observedGames;
        var gameMetadata = ResourceLoader.load_json('//games.ggp.org/games/metadata');
        
        var gameListHTML = '<table class="matchlist" cellpadding="5px">';
        gameListHTML += '<tr bgcolor=#E0E0E0><th class="padded">Game Name</th><th class="padded">Players</th><th class="padded">Version</th><th class="padded">Has Description?</th></tr>';
        for (var i = 0; i < observedGames.length; i++) {
          if (i % 2 == 0) {
            gameListHTML += "<tr bgcolor=#F5F5F5>";
          } else {          
            gameListHTML += "<tr bgcolor=#E0E0E0>";
          }        
        
          var gameKey = observedGames[i];
          var theGame = gameMetadata[gameKey.replace("http://games.ggp.org/games/", "").split("/")[0]];
          var theVersion = 1*(gameKey.replace("http://games.ggp.org/games/", "").split("/")[1].replace("v",""));
          gameListHTML += '<td class="padded"><a href="/games/' + translateRepositoryIntoCodename(gameKey) + '">' + theGame.gameName + '</a></td>';
          gameListHTML += '<td class="padded">' + toProperString(theGame.numRoles) + '</td>';
          gameListHTML += '<td class="padded">' + toProperString(theVersion) + '</td>';
          gameListHTML += '<td class="padded">' + ("description" in theGame ? "Yes" : "No") + '</td></tr>';
        }
        gameListHTML += "</table>"
        document.getElementById('gameList').innerHTML = gameListHTML;
      }
      
      drawGameList();
    </script>
  </body>  
</html>