<html>
  <head>
    <title>GGP Apollo Server</title>
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Droid+Sans:bold">
    <link rel="stylesheet" type="text/css" href="/apollo.css" />
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
    <script type='text/javascript' src='//www.ggp.org/scripts/Analytics.js'></script>
  </head>
  <body>
    <script type='text/javascript' src='//www.ggp.org/scripts/common/ResourceLoader.js'></script>
    <script type="text/javascript" src="/apolloHeader.js"></script>
  
    <div id='header'></div>
    <br>
    <center>You can <a rel="nofollow" href="javascript:add_new_player()">add your player</a> to this list!</center>
    <br>
    <div id='playerList'></div>

    <script type='text/javascript'>
      generateHeader(document.getElementById('header'));        

      function add_new_player() {
        var theName = window.prompt("What should the player's name be? It can only contain letters, digits, dashes, and underscores. Once chosen, it cannot be changed.", "");
        var thePlayer = {};
        thePlayer.name = theName;
        thePlayer.theURL = "";
        thePlayer.isEnabled = false;
        thePlayer.gdlVersion = "GDLv1";
        thePlayer.visibleEmail = "";
        if (theName.length > 0) {
          var theResponse = JSON.parse(ResourceLoader.post_raw("/data/updatePlayer", JSON.stringify(thePlayer)));
          if (theResponse) {
            drawPlayerList();
          } else {
            alert("Failed to create player named: " + theName);
          }
        }
      }

      function drawPlayerList() {
        var thePlayers = ResourceLoader.load_json('/data/players/');
        var playerListHTML = '';
        for (var i in thePlayers) {
          playerListHTML += generatePlayerHTML(thePlayers[i]);
        }
        playerListHTML += '';
        document.getElementById('playerList').innerHTML = playerListHTML;
      }
      
      drawPlayerList();
    </script>
  </body>  
</html>