<html>
  <head>
    <title>GGP Apollo Server</title>
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Droid+Sans:bold">
    <link rel="stylesheet" type="text/css" href="/apollo.css" />
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
    <script type='text/javascript' src='//www.ggp.org/scripts/Analytics.js'></script>
  </head>
  <body>
    <script type='text/javascript' src='//www.ggp.org/scripts/common/ResourceLoader.js'></script>
    <script type="text/javascript" src="/apolloHeader.js"></script>
  
    <div id='header'></div>
    <br>
    <div id='gameList'></div>

    <script type='text/javascript'>
      generateHeader(document.getElementById('header'));      
      translateRepositoryIntoCodename = function(x) { return x.replace("http://games.ggp.org/games/", "base/"); }

      function drawGameList() {
        var theGames = ResourceLoader.load_json('/data/games/');
        var gameListHTML = '<ul>';
        for (var i in theGames) {
          gameListHTML += '<li><a href="/games/' + translateRepositoryIntoCodename(theGames[i].gameMetaURL) + '">' + theGames[i].metadata.gameName + '</a>';
        }
        gameListHTML += "</ul>"
        document.getElementById('gameList').innerHTML = gameListHTML;
      }
      
      drawGameList();
    </script>
  </body>  
</html>